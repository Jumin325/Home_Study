CLF 취득했으니 강의 섹션 3, 4, 5 & 12 는 패스

<공용 IP와 사설IP, 그리고 탄력적 IP>
- 공용 IP
ㄴ 공용 IP는 곧 기기가 인터넷상에서 식별될 수 있음을 의미
ㄴ 공용 IP는 고유해야됨
ㄴ 구글 검색을 통해 그 위치를 찾을 수 있음

- 사설 IP
ㄴ 사설 네트워크에서만 식별
ㄴ IP가 사설 네트워크 안에서만 유일하면됨
ㄴ 지정된 범위의 IP만 사설 IP로 사용가능

- 탄력적 IP
ㄴ EC2 인스턴스를 시작하고 중지할 때 공용 IP를 바꿀 수 있음
ㄴ IPv4 구조, 한번에 한 인스턴스에만 첨부할 수 있음
ㄴ 계정당 탄력적 IP를 5개 쓸 수 있음
ㄴ 결정적으로 탄력적 IP는 사용하지 않는게 좋음
    ㄴ 매우 좋지 않은 구조적 결정으로 종종 언급됨
    ㄴ 대신 임의의 공용 IP를 써서 DNS 이름을 할당하는 것이 좋음

특정 EC2 인스턴스에 Elastic IPs를 사용하여 인스턴스 실행동안 탄력적 IP 부여 가능 
인스턴스는 생성될 때마다 공용 IPv4 주소를 부여받는데,
종료 후 재실행 시 기존에 사용하던 것과는 다른 공용 IP 주소를 부여받게 된다.
이를 해결하기 위해 탄력적 IP 주소 할당을 시켜주는 것이고
이 탄력적 IP 주소 할당은 인스턴스와 네트워크 인터페이스에 할당할 수 있다.
탄력적 IP를 할당해 줄 경우 인스턴스의 종료 시작 여부에 상관없이 탄력적 IP 주소로 IP 주소가 고정된다.

<배치 그룹>
- 클러스터 배치 그룹
ㄴ 단일 가용 영역 내에서 지연 시간이 짧은 하드웨어 설정으로 인스턴스를 그룹화
ㄴ 높은 성능을 제공하지만 위험 또한 높음
ㄴ 모든 EC2 인스턴스가 동일한 가용영역에 존재
ㄴ 모든 인스턴스 간에 초당 약 10기가비트의 대역폭을 확보하여 향상된 네트워킹을 활성화
ㄴ 지연 시간이 짧고 처리량이 많은 네트워크를 확보
ㄴ 어떤 종류의 계산 작업에서도 뛰어난 성능을 얻을 수 있음
ㄴ 단점으론 가용 영역에 장애가 발생하면 모든 인스턴스가 동시에 장애를 일으킴

- 분산 배치 그룹 - EC2 인스턴스를 여러 AZ에 걸쳐 서로 다른 물리적 하드웨어에 배치
ㄴ 인스턴스가 다른 하드웨어에 분산된다는 의미
ㄴ 가용 영역별로 분산된 배치 그룹당 7개의 EC2 인스턴스만 가질 수 있다는 제한 사항이 있음
ㄴ 크리티컬 애플리케이션이 있는 경우 분산 배치 그룹을 사용
ㄴ 실패 위험을 최소화
ㄴ 모든 EC2 인스턴스가 다른 하드웨어에 위치함
ㄴ 여러 가용 영역에 걸쳐 있을 수 있으며 동시 실패의 위험이 감소
ㄴ 단점으론 가용 영역당 7개의 인스턴스로 제한됨
ex) 사용 사례는 가용성을 극대화 하고 위험을 줄여야 하는 애플리케이션

- 분할 배치 그룹
ㄴ 여러 파티션에 인스턴스가 분할되어 있고 이 파티션은 가용 영역 내의 다양한 하드웨어 랙 세트에 의존
ㄴ 즉 인스턴스가 여전히 분리되어 있지만 다른 실패로부터 격리되지 않음
ㄴ 하지만 다른 오류 파티션과 격리되어야 함
ㄴ 여러 가용 영역 파티션에 인스턴스를 분산 가능 
ㄴ 가용 영역당 최대 7개의 파티션 존재

<탄력적 네트워크 인터페이스(ENI)>
ㄴ VPC의 논리적 구성 요소이며 가상 네트워크 카드를 나타냄
ㄴ ENI는 EC2 인스턴스가 네트워크에 액세스 할 수 있게 해줌
ㄴ 각 ENI는 다음과 같은 속성을 가질 수 있음
    1. 주요 사설 IPv4와 하나 이상의 보조 IPv4를 가질 수 있음
    2. 각 ENI는 사설 IPv4당 탄력적 IPv4를 갖거나 혹은 하나의 공용 IPv4를 가질 수 있으므로 사설 및 공용 IP가
    한개씩 제공됨
    3. ENI에 하나 이상의 보안 그룹을 연결할 수 있음
    4. EC2 인스턴스와 독립적으로 ENI를 생성하고 즉시 연결하거나 장애 조치를 위해 EC2 인스턴스에서 이동시킬 수 있음
ㄴ ENI는 특정 가용 영역 즉 AZ에 바인딩됨
    즉 특정 AZ에서 ENI를 생성하면 해당 AZ에만 바인딩할 수 있음을

    -ENI 실습
    1. 인스턴스가 생성될 때 자동으로 ENI가 하나 생성됨, 인스턴스 생성 후 네트워크 탭의 아래쪽에 가보면
    연결된 ENI를 확인할 수 있음
    2. 왼쪽에 네트워크&시크릿 탭에 네트워크 인터페이스가 있는데 여기서 ENI를 관리할 수 있음
    3. 인스턴스 종료 시 인스턴스 생성 시에 만들어진 ENI는 삭제되지만 사용자가 직접 생성한
    ENI는 삭제되지 않음
    4. ENI를 직접 생성하면 프라이빗 IPv4 주소를 더 많이 활용할 수 있고 따라서 네트워킹 작업도 수월해짐
    ENI는 있어도 비용 발생x

<EC2 절전모드(Hibernate)>
ㄴ EC2 인스턴스가 절전모드가 되면 RAM에 있던 인 메모리 상태는 그대로 보존
ㄴ 인스턴스 부팅이 더 빨라짐    / 운영체제를 완전히 중지하거나 다시 시작하지 않고 그대로 멈춰두었으니까
ㄴ RAM에 기록되었던 인 메모리는 루트 경로의 EBS 볼륨에 기록되기 때문에 
    루트 EBS 볼륨을 암호화해야 하고 볼륨 용량도 RAM을 저장하기에 충분해야함
    (볼륨에 덤프된 데이터를 인스턴스 실행시 그대로 가져오기 때문)
ㄴ 모든 종류의 인스턴스에서 사용 가능
ㄴ 최대 60일까지 절전모드 사용 가능
ex) 오래 실행되는 프로세스를 갖고 있고 중지하지 않을 때, RAM 상태를 저장하고 싶을 때, 빠르게 재부팅하고 싶을때

사용중인 EC2 인스턴스의 상태를 절전모드로 변경하면 EC2 볼륨에 있던 모든 데이터를 EBS 볼륨에 저장함
EC2 인스턴스 운영체제 입장에선 운영체제를 종료한 것이 아니라 절전모드로 두었다가 도로 킨 것이기 때문에
인스턴스 uptime에도 가장 마지막에 인스턴스를 실행한 시간이 출력되는 것

<EBS 볼륨>
EBS 볼륨은 네트워크 USB 스틱(물리적인 드라이브x)
프리티어는 매달 30 GB SSD gp2 or gp3 사용 가능
네트워크로 연동되기에 다른 컴퓨터로 전송될 때 지연이 발생할 수 있음
다른 리전으로 볼륨을 옮기는 것은 불가능하지만 스냅샷을 이용하면 다른 가용 영역으로 볼륨을 옮길 수 있음
IOPS는 단위 초당 전송 수
하나의 인스턴스에 두개의 EBS 볼륨을 연결하는건 문제 없음
종료시 삭제 라는 기능이 있음
ㄴ EC2 인스턴스의 스토리지 오른쪽 끝에 보면 있음

EBS 스냅샷 아카이브와 EBS 스냅샷 휴지통
스냅샷 아카이브는 24~72시간 이내 복구 (즉시 복구x)
EBS 스냅샷 휴지통은 실주로 삭제하는 경우 복원 가능 기간은 1일~1년 사이
FSR(빠른 스냅샷 복원)은 스냅샷을 완전히 초기화 해 첫 사용하는것처럼 지연 시간을 없애는 기능
EC2 인스턴스를 초기화 할때 유용하지만 비용 ↑

<AMI>
EC2 인스턴스를 통해 만든 이미지
AMI에다 원하는 소프트웨어 또는 설정 파일 추가, 별도의 운영체제 설치, 모니터링 툴 추가
AMI는 아마존에서 재공하는 버전이 있고, 유저가 직접 추가해서 쓸 수도 있음
유저 데이터를 사용해 만드는 EC2 인스턴스는 최초 실행 시 약간의 시간을 기다려야함
EC2 인스턴스에 이미지 생성을 눌러 이미지를 만들면 좌측에 AMIs 옵션에 AMI 이미지가 등록됨

그 후에 인스턴스 생성 시에 퀵스타트는 내버려두고 my AMIs 탭으로 가면 내가 소유한 AMI를 기반으로 인스턴스 생성 가능

EC2 인스턴스 스토어는 I/O 성능 향상을 위해 활용 가능
인스턴스를 종료하면 날라가기 때문에 버퍼나 캐시, 스크래치 데이터 또는 임시 데이터 컨텐츠를 저장할때 사용하면 됨
인스턴스가 날아가면 데이터 손실 가능성도 있어서 데이터를 복제나 백업 해두는게 좋음

<EBS 볼륨 종류>
gp2 gp3
    ㄴ 성능과 균형 범용 SSD 볼륨
Io1과 Io2 Block Express
    ㄴ 가장 높은 성능의 SSD 볼륨 ex) 미션 크리티컬, 저지연, 고처리량 작업에 사용
    ㄴ 자주 액세스하고 처리량이 많은 작업을 위해 설계
SC1 볼륨
    ㄴ 가장 저렴한 HDD 볼륨
    ㄴ 액세스빈도가 낮은 작업을 위해 설계

<루팅 볼륨으로 사용 가능한 볼륨들>
gp2, gp3, Io1, Io2만 부팅 볼륨으로 사용 가능
gp2 : 최대 3000 IOP까지 제공, 볼륨의 크기는 IOP과 연관되어 있음, 최대 5334GB(16000 IOPS)까지 제공
gp3 : 기본적으로 3000 IOP와 초당 125MB 처리량 제공, 최대 16000 IOP와 초당 처리량 1GB까지 독립적으로 증가 가능

<프로비저닝된 IOPS 볼륨>
Io1 : 4TB~16TB까지 지원하며 최대 IOP를 프로비저닝 가능, 최대 IOP는 Nitro EC2 인스턴스의 경우 약 64000이고 다른 종류의 인스턴스는 32000,
      스토리지 크기와 별도로 프로비저닝된 IOPS를 늘릴 수 있음
Io2 Block Express : 4 GB ~ 64 TB 지원, 서브 밀리초 발생, IOPS : 기가 바이트비율 -> 1000:1, 최대 IOPS 256000
                    프로비저닝된 IOP 볼륨은 EBS 다중 연결 기능 지원
위 두 볼륨은 하나의 가용영역에 여러 EC2 인스턴스에 연결할 수 있는 다중 연결 기능 활성화
ex) 클러스터링된 Linux 애플리케이션, 애플리케이션에서 동시 쓰기 작업을 관리할 때
한번에 16개의 EC2 인스턴스만 같은 볼륨에 연결 가능
다중 연결을 사용하려면 클러스터 인식 파일 시스템을 사용해야함

EBS 다중 연결 : 동일한 EBS 볼륨을 동일한 AZ에 있는 다수의 EC2 인스턴스에 연결
ㄴ 쉽게 풀자면 동일 AZ에서 하나의 EBS가 여러 EC2 인스턴스에 연결 될 수 있다는 뜻
    여러 EC2 -> 하나의 EBS 볼륨 o / 여러 EBS 볼륨 -> EC2 인스턴스 x
ㄴ io1, io2만 가능 gp2(x)

<루팅 볼륨으로 사용할 수 없는 볼륨>
ST1(HDD)
ㄴ ex) 빅데이터, 데이터 웨어하우징, 로그 처리

SC1(Cold HDD)
ㄴ ex) 아카이브 데이터용(자주 액세스 되지 않는 데이터용)
ㄴ 최대 처리량은 초당 250MB, 최대 IOPS 250

<EBS 볼륨 암호화>
1. EBS 볼륨 생성(암호화x) -> 암호화가 되지 않았다면 생성하는 스냅샷도 암호화x
2. 스냅샷 복사할 때 동일 리전에 복사할 경우 아래쪽에 암호화 버튼이 생김, 활성화 시 스냅샷 암호화됨 이때 KMS 키도 선택
3. 방금 복사한 스냅샷에서 볼륨을 생성할 때 기초가 되는 스냅샷이 암호화되어 있어서 볼륨도 자동으로 암호화

암호화 되지 않은 스냅샷을 클릭해서 볼륨을 통해 새로운 스냅샷 생성하기 -> 동일 리전 시 EBS 볼륨 암호화 활성화, 키는 aws/ebs 키 선택

<EFS>
ex) 콘텐츠 관리, 웹 서빙, 데이터 공유, Wordpress
ㄴ 가격이 비쌈(gp2 EBS 볼륨의 약 3배)
ㄴ 내부적으로 NFS 프로토콜을 사용하며 EFS에 대한 액세스 제어를 하려면 보안 그룹 설정해야함
ㄴ KMS를 사용하여 EFS 드라이브에서 미사용 암호화 활성화
ㄴ 사용량에 따라 비용 청구(완벽한 종량제)
ㄴ EFS 스케일은 NFS 클라이언트 수천 개와 10GB 이상의 처리량 확보 + PB 규모의 네트워크 파일 시스템 자동 확장

성능 모드들이 존재
범용 - 기본값
ㄴ 지연 시간에 민감한 사용 사례에 사용됨
ex)웹서버, CMS

최대 I/O 모드 - 처리량 최대화
ㄴ 지연 시간이 더 긴 네트워크 파일 시스템이지만 처리량 높고 병렬성 높음
ex)빅데이터 애플리케이션, 미디어 처리

처리량 모드들
버스팅 - 초당 50MB~100MB 버스트 더한것 / 스토리지 양에 따른 처리량
프로비저닝 - 스토리지 크기에 관계없이 처리량 설정, 1TB의 스토리지에서 초당 1GB 처리 가능
엘라스틱(종량제) - 워크로드에 따라 처리량 자동으로 조절, 워크로드를 예측하기 어려울 때 유용

<EFS 스토리지 클래스>
스탠다드 - 자주 액세스 하는 파일을 위한 계층
EFS-IA - 자주 액세스 하지 않는 용도, 저장하면 비용 감소하지만 파일 검색 시 비용 발생, 
아카이브 - 거의 액세스 하지 않는 데이터용
수명 주기 정책 구현
스탠다드 - 다중AZ 설정있는 경우 스탠다드 권장, 재해 대비
원존(EFS One Zone-IA) - 개발만 하고 싶고 더 저렴한 옵션을 원한다면 권장, 하나의 AZ에 있고 백업은 기본적으로 활성화

일반 - 엘라스틱 모드 시엔 범용 모드만 선택 가능
프로비저닝과 버스팅 - Max I/O 모드 선택 가능(빅데이터 유형의 설정)
EC2 인스턴스 생성 시 서브넷을 EFS 보안그룹을 적용한 서브넷으로 선택하면 파일 시스템에서 EFS나 FSx를 선택 가능